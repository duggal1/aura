2025-04-26 12:34:02.188 | INFO     | app.main:lifespan:14 - Starting application...
2025-04-26 12:34:02.198 | INFO     | app.logging_setup:start_metrics_server:81 - Prometheus metrics server started on port 8001
2025-04-26 12:34:02.207 | INFO     | app.cache:init_redis_pool:27 - Successfully connected to Redis at redis://localhost:6379/0
2025-04-26 12:34:05.887 | INFO     | app.emotion_pipeline:load_models:49 - Loaded emotion model labels: ['admiration', 'amusement', 'anger', 'annoyance', 'approval', 'caring', 'confusion', 'curiosity', 'desire', 'disappointment', 'disapproval', 'disgust', 'embarrassment', 'excitement', 'fear', 'gratitude', 'grief', 'joy', 'love', 'nervousness', 'optimism', 'pride', 'realization', 'relief', 'remorse', 'sadness', 'surprise', 'neutral']
2025-04-26 12:34:05.923 | INFO     | app.llm_service:configure_genai:25 - Google GenAI client configured.
2025-04-26 12:34:05.925 | INFO     | app.main:lifespan:22 - Redis cache cleared on startup.
2025-04-26 12:34:05.925 | INFO     | app.main:lifespan:25 - Startup complete.
2025-04-26 12:35:57.158 | INFO     | app.main:chat_endpoint:74 - [ReqID: req_5de729b3] Chat request: 'hey how u doing...'
2025-04-26 12:35:57.181 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-26 12:35:59.507 | INFO     | app.emotion_pipeline:map_emotions:71 - Raw distribution: {'neutral': 0.881327211856842, 'caring': 0.04464380070567131, 'curiosity': 0.031589433550834656, 'approval': 0.008925586938858032, 'optimism': 0.0069856224581599236, 'desire': 0.0059980894438922405, 'annoyance': 0.004915877245366573, 'confusion': 0.004326252732425928, 'excitement': 0.004099397454410791, 'sadness': 0.003390585770830512, 'love': 0.0029586285818368196, 'joy': 0.002655738266184926, 'realization': 0.002610219642519951, 'admiration': 0.0025962376967072487, 'anger': 0.002113590482622385, 'disappointment': 0.002032838761806488, 'amusement': 0.0015858405968174338, 'surprise': 0.0015240199863910675, 'gratitude': 0.0012816052185371518, 'disapproval': 0.0012654508464038372, 'fear': 0.0011521835112944245, 'disgust': 0.0008881576941348612, 'nervousness': 0.0008780219359323382, 'remorse': 0.0007799158920533955, 'grief': 0.0007454071310348809, 'relief': 0.0007189842872321606, 'embarrassment': 0.0003970770339947194, 'pride': 0.00020877296628896147}
2025-04-26 12:35:59.509 | INFO     | app.emotion_pipeline:map_emotions:72 - Mapped distribution: {'neutral': 0.88133, 'caring': 0.04464, 'curious': 0.03159, 'approving': 0.00893, 'optimistic': 0.00699, 'desirous': 0.006, 'annoyed': 0.00492, 'confused': 0.00433, 'excited': 0.0041, 'sad': 0.00339, 'loved': 0.00296, 'happy': 0.00266, 'realizing': 0.00261, 'admiring': 0.0026, 'angry': 0.00211, 'disappointed': 0.00203, 'amused': 0.00159, 'surprised': 0.00152, 'grateful': 0.00128, 'disapproving': 0.00127, 'fearful': 0.00115, 'disgusted': 0.00089, 'nervous': 0.00088, 'remorseful': 0.00078, 'grieving': 0.00075, 'relieved': 0.00072, 'embarrassed': 0.0004, 'proud': 0.00021}
2025-04-26 12:35:59.511 | ERROR    | app.emotion_pipeline:analyze_emotions:115 - Failed to create EmotionAnalysisResult: Incorrect label names
2025-04-26 12:35:59.516 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 2.3348 seconds.
2025-04-26 12:35:59.517 | WARNING  | app.main:chat_endpoint:97 - [ReqID: req_5de729b3] Emotion analysis used fallback neutral emotion.
2025-04-26 12:35:59.518 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 12:36:02.493 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' completed successfully in 2.9745 seconds.
2025-04-26 12:36:02.494 | INFO     | app.main:chat_endpoint:128 - [ReqID: req_5de729b3] Skipped caching due to fallback neutral emotion.
2025-04-26 12:36:02.495 | INFO     | app.main:chat_endpoint:135 - [ReqID: req_5de729b3] Processed in 5.3363s.
2025-04-26 12:37:16.564 | INFO     | app.main:chat_endpoint:74 - [ReqID: req_201638c4] Chat request: 'how u doing...'
2025-04-26 12:37:16.573 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-26 12:37:18.312 | INFO     | app.emotion_pipeline:map_emotions:71 - Raw distribution: {'neutral': 0.7740994095802307, 'curiosity': 0.2118488997220993, 'confusion': 0.021828779950737953, 'caring': 0.018490862101316452, 'approval': 0.008314811624586582, 'optimism': 0.006776619236916304, 'desire': 0.005199445877224207, 'love': 0.004230894614011049, 'annoyance': 0.004207480698823929, 'excitement': 0.002744057448580861, 'surprise': 0.0026629038620740175, 'realization': 0.0026437153574079275, 'admiration': 0.0024681249633431435, 'sadness': 0.002156214090064168, 'anger': 0.0017339866608381271, 'disappointment': 0.0017318206373602152, 'joy': 0.0014810340944677591, 'disapproval': 0.001457938109524548, 'gratitude': 0.0013040787307545543, 'amusement': 0.0011106081074103713, 'fear': 0.0009872359223663807, 'disgust': 0.0007079040515236557, 'nervousness': 0.0006069595692679286, 'remorse': 0.0005601573502644897, 'grief': 0.0005231861723586917, 'relief': 0.0003763781860470772, 'embarrassment': 0.0003348632308188826, 'pride': 9.464637696510181e-05}
2025-04-26 12:37:18.312 | INFO     | app.emotion_pipeline:map_emotions:72 - Mapped distribution: {'neutral': 0.7741, 'curious': 0.21185, 'confused': 0.02183, 'caring': 0.01849, 'approving': 0.00831, 'optimistic': 0.00678, 'desirous': 0.0052, 'loved': 0.00423, 'annoyed': 0.00421, 'excited': 0.00274, 'surprised': 0.00266, 'realizing': 0.00264, 'admiring': 0.00247, 'sad': 0.00216, 'angry': 0.00173, 'disappointed': 0.00173, 'happy': 0.00148, 'disapproving': 0.00146, 'grateful': 0.0013, 'amused': 0.00111, 'fearful': 0.00099, 'disgusted': 0.00071, 'nervous': 0.00061, 'remorseful': 0.00056, 'grieving': 0.00052, 'relieved': 0.00038, 'embarrassed': 0.00033, 'proud': 9e-05}
2025-04-26 12:37:18.312 | ERROR    | app.emotion_pipeline:analyze_emotions:115 - Failed to create EmotionAnalysisResult: Incorrect label names
2025-04-26 12:37:18.313 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 1.7402 seconds.
2025-04-26 12:37:18.313 | WARNING  | app.main:chat_endpoint:97 - [ReqID: req_201638c4] Emotion analysis used fallback neutral emotion.
2025-04-26 12:37:18.314 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 12:37:21.405 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' completed successfully in 3.0916 seconds.
2025-04-26 12:37:21.406 | INFO     | app.main:chat_endpoint:128 - [ReqID: req_201638c4] Skipped caching due to fallback neutral emotion.
2025-04-26 12:37:21.406 | INFO     | app.main:chat_endpoint:135 - [ReqID: req_201638c4] Processed in 4.8422s.
2025-04-26 12:37:49.535 | INFO     | app.main:chat_endpoint:74 - [ReqID: req_15e42e52] Chat request: 'what?? i mean how are days going so far?...'
2025-04-26 12:37:49.538 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-26 12:37:49.732 | INFO     | app.emotion_pipeline:map_emotions:71 - Raw distribution: {'curiosity': 0.6198186278343201, 'confusion': 0.2722153663635254, 'neutral': 0.250419020652771, 'surprise': 0.08788911253213882, 'annoyance': 0.01809997484087944, 'realization': 0.010374724864959717, 'approval': 0.005375848151743412, 'anger': 0.004677935503423214, 'disapproval': 0.004554394632577896, 'disappointment': 0.004153819289058447, 'optimism': 0.004144840408116579, 'excitement': 0.004105415660887957, 'admiration': 0.002492333995178342, 'fear': 0.001791768823750317, 'disgust': 0.0016772664384916425, 'amusement': 0.0014641456073150039, 'embarrassment': 0.0013371972599998116, 'love': 0.0012041974114254117, 'joy': 0.0011926890583708882, 'sadness': 0.0011819583596661687, 'caring': 0.001169940922409296, 'desire': 0.0011503273854032159, 'nervousness': 0.0008933196077123284, 'gratitude': 0.0008137139375321567, 'grief': 0.0004354756965767592, 'remorse': 0.00039773088064976037, 'relief': 0.0002469202736392617, 'pride': 9.912862878991291e-05}
2025-04-26 12:37:49.732 | INFO     | app.emotion_pipeline:map_emotions:72 - Mapped distribution: {'curious': 0.61982, 'confused': 0.27222, 'neutral': 0.25042, 'surprised': 0.08789, 'annoyed': 0.0181, 'realizing': 0.01037, 'approving': 0.00538, 'angry': 0.00468, 'disapproving': 0.00455, 'disappointed': 0.00415, 'optimistic': 0.00414, 'excited': 0.00411, 'admiring': 0.00249, 'fearful': 0.00179, 'disgusted': 0.00168, 'amused': 0.00146, 'embarrassed': 0.00134, 'loved': 0.0012, 'happy': 0.00119, 'sad': 0.00118, 'caring': 0.00117, 'desirous': 0.00115, 'nervous': 0.00089, 'grateful': 0.00081, 'grieving': 0.00044, 'remorseful': 0.0004, 'relieved': 0.00025, 'proud': 0.0001}
2025-04-26 12:37:49.732 | ERROR    | app.emotion_pipeline:analyze_emotions:115 - Failed to create EmotionAnalysisResult: Incorrect label names
2025-04-26 12:37:49.733 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 0.1943 seconds.
2025-04-26 12:37:49.733 | WARNING  | app.main:chat_endpoint:97 - [ReqID: req_15e42e52] Emotion analysis used fallback neutral emotion.
2025-04-26 12:37:49.733 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 12:37:53.144 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' completed successfully in 3.4110 seconds.
2025-04-26 12:37:53.144 | INFO     | app.main:chat_endpoint:128 - [ReqID: req_15e42e52] Skipped caching due to fallback neutral emotion.
2025-04-26 12:37:53.145 | INFO     | app.main:chat_endpoint:135 - [ReqID: req_15e42e52] Processed in 3.6096s.
2025-04-26 12:46:36.695 | INFO     | app.main:lifespan:27 - Shutting down...
2025-04-26 12:46:36.708 | ERROR    | app.cache:close_redis_pool:49 - Error closing Redis connection pool: 'Redis' object has no attribute 'wait_closed'
