2025-04-26 02:23:18.610 | INFO     | app.main:lifespan:14 - Starting application...
2025-04-26 02:23:18.628 | INFO     | app.logging_setup:start_metrics_server:81 - Prometheus metrics server started on port 8001
2025-04-26 02:23:18.640 | INFO     | app.cache:init_redis_pool:27 - Successfully connected to Redis at redis://localhost:6379/0
2025-04-26 02:23:22.668 | INFO     | app.emotion_pipeline:load_models:49 - Loaded emotion model labels: ['admiration', 'amusement', 'anger', 'annoyance', 'approval', 'caring', 'confusion', 'curiosity', 'desire', 'disappointment', 'disapproval', 'disgust', 'embarrassment', 'excitement', 'fear', 'gratitude', 'grief', 'joy', 'love', 'nervousness', 'optimism', 'pride', 'realization', 'relief', 'remorse', 'sadness', 'surprise', 'neutral']
2025-04-26 02:23:22.727 | INFO     | app.llm_service:configure_genai:25 - Google GenAI client configured.
2025-04-26 02:23:22.729 | INFO     | app.main:lifespan:22 - Redis cache cleared on startup.
2025-04-26 02:23:22.729 | INFO     | app.main:lifespan:25 - Startup complete.
2025-04-26 02:23:22.733 | INFO     | app.main:chat_endpoint:74 - [ReqID: req_fef7c650] Chat request: 'Last night, I stared at my reflection in the dark ...'
2025-04-26 02:23:22.737 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-26 02:23:25.281 | INFO     | app.emotion_pipeline:map_emotions:71 - Raw distribution: {'sadness': 0.5057997703552246, 'disappointment': 0.36466163396835327, 'nervousness': 0.16694454848766327, 'fear': 0.10032423585653305, 'neutral': 0.07236124575138092, 'realization': 0.06181052327156067, 'confusion': 0.04339586943387985, 'curiosity': 0.02909584902226925, 'annoyance': 0.0288398340344429, 'approval': 0.022496681660413742, 'grief': 0.01419729646295309, 'caring': 0.011969159357249737, 'disapproval': 0.011532170698046684, 'optimism': 0.01084426324814558, 'surprise': 0.010446387343108654, 'remorse': 0.009741079993546009, 'embarrassment': 0.007215684745460749, 'admiration': 0.006351341027766466, 'love': 0.00623728521168232, 'anger': 0.005592692643404007, 'desire': 0.005217917263507843, 'relief': 0.004440147429704666, 'joy': 0.0037270025350153446, 'excitement': 0.0031898575834929943, 'disgust': 0.002761678770184517, 'pride': 0.0010365532943978906, 'amusement': 0.0010149808367714286, 'gratitude': 0.00064500467851758}
2025-04-26 02:23:25.283 | INFO     | app.emotion_pipeline:map_emotions:72 - Mapped distribution: {'sad': 0.5058, 'disappointed': 0.36466, 'nervous': 0.16694, 'fearful': 0.10032, 'neutral': 0.07236, 'realizing': 0.06181, 'confused': 0.0434, 'curious': 0.0291, 'annoyed': 0.02884, 'approving': 0.0225, 'grieving': 0.0142, 'caring': 0.01197, 'disapproving': 0.01153, 'optimistic': 0.01084, 'surprised': 0.01045, 'remorseful': 0.00974, 'embarrassed': 0.00722, 'admiring': 0.00635, 'loved': 0.00624, 'angry': 0.00559, 'desirous': 0.00522, 'relieved': 0.00444, 'happy': 0.00373, 'excited': 0.00319, 'disgusted': 0.00276, 'proud': 0.00104, 'amused': 0.00101, 'grateful': 0.00065}
2025-04-26 02:23:25.283 | ERROR    | app.emotion_pipeline:analyze_emotions:115 - Failed to create EmotionAnalysisResult: Incorrect label names
2025-04-26 02:23:25.284 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 2.5477 seconds.
2025-04-26 02:23:25.285 | WARNING  | app.main:chat_endpoint:97 - [ReqID: req_fef7c650] Emotion analysis used fallback neutral emotion.
2025-04-26 02:23:25.285 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 02:23:28.894 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' completed successfully in 3.6093 seconds.
2025-04-26 02:23:28.896 | INFO     | app.main:chat_endpoint:128 - [ReqID: req_fef7c650] Skipped caching due to fallback neutral emotion.
2025-04-26 02:23:28.897 | INFO     | app.main:chat_endpoint:135 - [ReqID: req_fef7c650] Processed in 6.1645s.
2025-04-26 02:28:08.850 | INFO     | app.main:chat_endpoint:74 - [ReqID: req_64e0c37f] Chat request: 'Iâ€™m 35, single, and my friends are all married wit...'
2025-04-26 02:28:08.870 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-26 02:28:10.714 | INFO     | app.emotion_pipeline:map_emotions:71 - Raw distribution: {'fear': 0.8570618033409119, 'nervousness': 0.46140679717063904, 'confusion': 0.129116490483284, 'sadness': 0.11438306421041489, 'curiosity': 0.10059355199337006, 'realization': 0.03907245397567749, 'neutral': 0.03803443908691406, 'disappointment': 0.03719354793429375, 'approval': 0.023940162733197212, 'caring': 0.020969608798623085, 'joy': 0.019522789865732193, 'surprise': 0.019047562032938004, 'excitement': 0.018262380734086037, 'love': 0.016391651704907417, 'admiration': 0.015134487301111221, 'annoyance': 0.014153072610497475, 'disapproval': 0.013971349224448204, 'grief': 0.012434273026883602, 'optimism': 0.010301943868398666, 'embarrassment': 0.009337108582258224, 'amusement': 0.00865728035569191, 'desire': 0.008326221257448196, 'relief': 0.008045025169849396, 'disgust': 0.0078080748207867146, 'anger': 0.006527222227305174, 'remorse': 0.005175952333956957, 'gratitude': 0.001686534727923572, 'pride': 0.0016641032416373491}
2025-04-26 02:28:10.715 | INFO     | app.emotion_pipeline:map_emotions:72 - Mapped distribution: {'fearful': 0.85706, 'nervous': 0.46141, 'confused': 0.12912, 'sad': 0.11438, 'curious': 0.10059, 'realizing': 0.03907, 'neutral': 0.03803, 'disappointed': 0.03719, 'approving': 0.02394, 'caring': 0.02097, 'happy': 0.01952, 'surprised': 0.01905, 'excited': 0.01826, 'loved': 0.01639, 'admiring': 0.01513, 'annoyed': 0.01415, 'disapproving': 0.01397, 'grieving': 0.01243, 'optimistic': 0.0103, 'embarrassed': 0.00934, 'amused': 0.00866, 'desirous': 0.00833, 'relieved': 0.00805, 'disgusted': 0.00781, 'angry': 0.00653, 'remorseful': 0.00518, 'grateful': 0.00169, 'proud': 0.00166}
2025-04-26 02:28:10.715 | ERROR    | app.emotion_pipeline:analyze_emotions:115 - Failed to create EmotionAnalysisResult: Incorrect label names
2025-04-26 02:28:10.716 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 1.8465 seconds.
2025-04-26 02:28:10.717 | WARNING  | app.main:chat_endpoint:97 - [ReqID: req_64e0c37f] Emotion analysis used fallback neutral emotion.
2025-04-26 02:28:10.717 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 02:28:14.510 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' completed successfully in 3.7936 seconds.
2025-04-26 02:28:14.511 | INFO     | app.main:chat_endpoint:128 - [ReqID: req_64e0c37f] Skipped caching due to fallback neutral emotion.
2025-04-26 02:28:14.511 | INFO     | app.main:chat_endpoint:135 - [ReqID: req_64e0c37f] Processed in 5.6625s.
2025-04-26 02:40:31.860 | INFO     | app.main:lifespan:27 - Shutting down...
2025-04-26 02:40:31.880 | ERROR    | app.cache:close_redis_pool:49 - Error closing Redis connection pool: 'Redis' object has no attribute 'wait_closed'
2025-04-26 02:40:31.880 | INFO     | app.main:lifespan:29 - Shutdown complete.
