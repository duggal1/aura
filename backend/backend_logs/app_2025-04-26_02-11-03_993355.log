2025-04-26 02:11:12.077 | INFO     | app.main:lifespan:15 - Starting application...
2025-04-26 02:11:12.082 | INFO     | app.logging_setup:start_metrics_server:81 - Prometheus metrics server started on port 8001
2025-04-26 02:11:12.084 | INFO     | app.cache:init_redis_pool:27 - Successfully connected to Redis at redis://localhost:6379/0
2025-04-26 02:11:15.925 | INFO     | app.llm_service:configure_genai:25 - Google GenAI client configured.
2025-04-26 02:11:15.925 | INFO     | app.main:lifespan:24 - Startup complete.
2025-04-26 02:11:18.582 | INFO     | app.main:chat_endpoint:78 - [ReqID: req_4908f6cc] Chat request: 'heyyy...'
2025-04-26 02:11:18.584 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-26 02:11:19.518 | ERROR    | app.emotion_pipeline:analyze_emotions:114 - Failed to create EmotionAnalysisResult: Incorrect label names
2025-04-26 02:11:19.518 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 0.9341 seconds.
2025-04-26 02:11:19.519 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 02:11:22.449 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' completed successfully in 2.9298 seconds.
2025-04-26 02:11:22.452 | INFO     | app.main:chat_endpoint:133 - [ReqID: req_4908f6cc] Response cached.
2025-04-26 02:11:22.453 | INFO     | app.main:chat_endpoint:140 - [ReqID: req_4908f6cc] Processed in 3.8699s.
2025-04-26 02:12:00.509 | INFO     | app.main:chat_endpoint:78 - [ReqID: req_b0ecef39] Chat request: 'Last night, I stared at my reflection in the dark ...'
2025-04-26 02:12:00.517 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-26 02:12:01.450 | ERROR    | app.emotion_pipeline:analyze_emotions:114 - Failed to create EmotionAnalysisResult: Incorrect label names
2025-04-26 02:12:01.451 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 0.9336 seconds.
2025-04-26 02:12:01.451 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 02:12:05.195 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' failed with JSONDecodeError in 3.7442 seconds.
2025-04-26 02:12:05.196 | WARNING  | app.utils:wrapper:29 - Attempt 1/4 failed for refine_and_respond. Error: JSONDecodeError: Expecting ',' delimiter: line 16 column 2 (char 794). Retrying in 1.00s...
2025-04-26 02:12:06.198 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 02:12:08.772 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' failed with JSONDecodeError in 2.5741 seconds.
2025-04-26 02:12:08.773 | WARNING  | app.utils:wrapper:29 - Attempt 2/4 failed for refine_and_respond. Error: JSONDecodeError: Expecting ',' delimiter: line 16 column 2 (char 902). Retrying in 1.50s...
2025-04-26 02:12:10.275 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 02:12:12.458 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' failed with JSONDecodeError in 2.1837 seconds.
2025-04-26 02:12:12.459 | WARNING  | app.utils:wrapper:29 - Attempt 3/4 failed for refine_and_respond. Error: JSONDecodeError: Expecting ',' delimiter: line 20 column 2 (char 791). Retrying in 2.25s...
2025-04-26 02:12:14.711 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 02:12:17.011 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' failed with JSONDecodeError in 2.2993 seconds.
2025-04-26 02:12:17.012 | WARNING  | app.utils:wrapper:29 - Attempt 4/4 failed for refine_and_respond. Error: JSONDecodeError: Expecting ',' delimiter: line 20 column 2 (char 840). Retrying in 3.38s...
2025-04-26 02:12:17.012 | ERROR    | app.utils:wrapper:37 - All 4 retry attempts failed for refine_and_respond. Last error: JSONDecodeError: Expecting ',' delimiter: line 20 column 2 (char 840)
2025-04-26 02:12:17.013 | ERROR    | app.llm_service:generate_emotional_response:65 - Failed to generate emotional response: Expecting ',' delimiter: line 20 column 2 (char 840)
2025-04-26 02:12:17.017 | INFO     | app.main:chat_endpoint:133 - [ReqID: req_b0ecef39] Response cached.
2025-04-26 02:12:17.017 | INFO     | app.main:chat_endpoint:140 - [ReqID: req_b0ecef39] Processed in 16.5086s.
2025-04-26 02:13:22.551 | INFO     | app.main:lifespan:26 - Shutting down...
2025-04-26 02:13:22.556 | ERROR    | app.cache:close_redis_pool:49 - Error closing Redis connection pool: 'Redis' object has no attribute 'wait_closed'
2025-04-26 02:13:22.557 | INFO     | app.main:lifespan:28 - Shutdown complete.
