2025-04-25 23:31:47.052 | INFO     | app.main:lifespan:15 - Starting application...
2025-04-25 23:31:47.062 | INFO     | app.logging_setup:start_metrics_server:81 - Prometheus metrics server started on port 8001
2025-04-25 23:31:47.068 | ERROR    | app.cache:init_redis_pool:24 - Failed to connect to Redis (via redis-py) at redis://redis:6379/0: Error 8 connecting to redis:6379. nodename nor servname provided, or not known.
2025-04-25 23:31:49.021 | INFO     | app.emotion_pipeline:load_emotion_model:39 - Loaded emotion model on device 0.
2025-04-25 23:31:49.279 | INFO     | app.llm_service:configure_genai:20 - Google Generative AI client configured. SDK version: 1.12.1
2025-04-25 23:31:49.279 | INFO     | app.main:lifespan:20 - Startup complete.
2025-04-25 23:31:55.310 | INFO     | app.main:chat_endpoint:74 - [ReqID: req_cac8aa3b] Chat request: 'hey how you doin...'
2025-04-25 23:31:55.311 | ERROR    | app.cache:get_redis:42 - Redis pool is not initialized or connection failed.
2025-04-25 23:31:55.312 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-25 23:32:00.906 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 5.5949 seconds.
2025-04-25 23:32:00.907 | INFO     | app.utils:wrapper:76 - Starting 'Emotionally Intelligent LLM Call'...
2025-04-25 23:32:03.187 | INFO     | app.utils:wrapper:86 - 'Emotionally Intelligent LLM Call' failed with TypeError in 2.2793 seconds.
2025-04-25 23:32:03.187 | WARNING  | app.utils:wrapper:29 - Attempt 1/4 failed for generate_emotional_response. Error: TypeError: 'async for' requires an object with __aiter__ method, got generator. Retrying in 1.00s...
2025-04-25 23:32:04.189 | INFO     | app.utils:wrapper:76 - Starting 'Emotionally Intelligent LLM Call'...
2025-04-25 23:32:05.332 | INFO     | app.utils:wrapper:86 - 'Emotionally Intelligent LLM Call' failed with TypeError in 1.1432 seconds.
2025-04-25 23:32:05.333 | WARNING  | app.utils:wrapper:29 - Attempt 2/4 failed for generate_emotional_response. Error: TypeError: 'async for' requires an object with __aiter__ method, got generator. Retrying in 1.50s...
2025-04-25 23:32:06.835 | INFO     | app.utils:wrapper:76 - Starting 'Emotionally Intelligent LLM Call'...
2025-04-25 23:32:07.657 | INFO     | app.utils:wrapper:86 - 'Emotionally Intelligent LLM Call' failed with TypeError in 0.8220 seconds.
2025-04-25 23:32:07.658 | WARNING  | app.utils:wrapper:29 - Attempt 3/4 failed for generate_emotional_response. Error: TypeError: 'async for' requires an object with __aiter__ method, got generator. Retrying in 2.25s...
2025-04-25 23:32:09.910 | INFO     | app.utils:wrapper:76 - Starting 'Emotionally Intelligent LLM Call'...
2025-04-25 23:32:10.884 | INFO     | app.utils:wrapper:86 - 'Emotionally Intelligent LLM Call' failed with TypeError in 0.9740 seconds.
2025-04-25 23:32:10.885 | WARNING  | app.utils:wrapper:29 - Attempt 4/4 failed for generate_emotional_response. Error: TypeError: 'async for' requires an object with __aiter__ method, got generator. Retrying in 3.38s...
2025-04-25 23:32:10.885 | ERROR    | app.utils:wrapper:37 - All 4 retry attempts failed for generate_emotional_response. Last error: TypeError: 'async for' requires an object with __aiter__ method, got generator
2025-04-25 23:32:10.886 | ERROR    | app.main:chat_endpoint:119 - [ReqID: req_cac8aa3b] LLM error: 'async for' requires an object with __aiter__ method, got generator
2025-04-25 23:33:12.767 | INFO     | app.main:lifespan:22 - Shutting down...
2025-04-25 23:33:12.772 | INFO     | app.main:lifespan:24 - Shutdown complete.
