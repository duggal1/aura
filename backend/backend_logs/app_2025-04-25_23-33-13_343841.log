2025-04-25 23:33:21.386 | INFO     | app.main:lifespan:15 - Starting application...
2025-04-25 23:33:21.392 | INFO     | app.logging_setup:start_metrics_server:81 - Prometheus metrics server started on port 8001
2025-04-25 23:33:21.396 | ERROR    | app.cache:init_redis_pool:24 - Failed to connect to Redis (via redis-py) at redis://redis:6379/0: Error 8 connecting to redis:6379. nodename nor servname provided, or not known.
2025-04-25 23:33:23.209 | INFO     | app.emotion_pipeline:load_emotion_model:39 - Loaded emotion model on device 0.
2025-04-25 23:33:23.258 | INFO     | app.llm_service:configure_genai:20 - Google Generative AI client configured. SDK version: 1.12.1
2025-04-25 23:33:23.258 | INFO     | app.main:lifespan:20 - Startup complete.
2025-04-25 23:33:27.765 | INFO     | app.main:chat_endpoint:74 - [ReqID: req_5e29fb12] Chat request: 'hey how you doin sweetheart?...'
2025-04-25 23:33:27.766 | ERROR    | app.cache:get_redis:42 - Redis pool is not initialized or connection failed.
2025-04-25 23:33:27.766 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-25 23:33:31.674 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 3.9073 seconds.
2025-04-25 23:33:31.674 | INFO     | app.utils:wrapper:76 - Starting 'Emotionally Intelligent LLM Call'...
2025-04-25 23:33:33.677 | INFO     | app.utils:wrapper:86 - 'Emotionally Intelligent LLM Call' failed with TypeError in 2.0027 seconds.
2025-04-25 23:33:33.677 | WARNING  | app.utils:wrapper:29 - Attempt 1/4 failed for generate_emotional_response. Error: TypeError: 'async for' requires an object with __aiter__ method, got coroutine. Retrying in 1.00s...
2025-04-25 23:33:34.678 | INFO     | app.utils:wrapper:76 - Starting 'Emotionally Intelligent LLM Call'...
2025-04-25 23:33:36.149 | INFO     | app.utils:wrapper:86 - 'Emotionally Intelligent LLM Call' failed with TypeError in 1.4717 seconds.
2025-04-25 23:33:36.156 | WARNING  | app.utils:wrapper:29 - Attempt 2/4 failed for generate_emotional_response. Error: TypeError: 'async for' requires an object with __aiter__ method, got coroutine. Retrying in 1.50s...
2025-04-25 23:33:37.658 | INFO     | app.utils:wrapper:76 - Starting 'Emotionally Intelligent LLM Call'...
2025-04-25 23:33:38.918 | INFO     | app.utils:wrapper:86 - 'Emotionally Intelligent LLM Call' failed with TypeError in 1.2602 seconds.
2025-04-25 23:33:38.919 | WARNING  | app.utils:wrapper:29 - Attempt 3/4 failed for generate_emotional_response. Error: TypeError: 'async for' requires an object with __aiter__ method, got coroutine. Retrying in 2.25s...
2025-04-25 23:33:41.172 | INFO     | app.utils:wrapper:76 - Starting 'Emotionally Intelligent LLM Call'...
2025-04-25 23:33:42.404 | INFO     | app.utils:wrapper:86 - 'Emotionally Intelligent LLM Call' failed with TypeError in 1.2328 seconds.
2025-04-25 23:33:42.405 | WARNING  | app.utils:wrapper:29 - Attempt 4/4 failed for generate_emotional_response. Error: TypeError: 'async for' requires an object with __aiter__ method, got coroutine. Retrying in 3.38s...
2025-04-25 23:33:42.406 | ERROR    | app.utils:wrapper:37 - All 4 retry attempts failed for generate_emotional_response. Last error: TypeError: 'async for' requires an object with __aiter__ method, got coroutine
2025-04-25 23:33:42.406 | ERROR    | app.main:chat_endpoint:119 - [ReqID: req_5e29fb12] LLM error: 'async for' requires an object with __aiter__ method, got coroutine
