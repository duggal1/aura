2025-04-26 02:18:53.058 | INFO     | app.main:lifespan:14 - Starting application...
2025-04-26 02:18:53.069 | INFO     | app.logging_setup:start_metrics_server:81 - Prometheus metrics server started on port 8001
2025-04-26 02:18:53.079 | INFO     | app.cache:init_redis_pool:27 - Successfully connected to Redis at redis://localhost:6379/0
2025-04-26 02:18:57.271 | INFO     | app.emotion_pipeline:load_models:51 - Loaded emotion model labels: dict_values(['admiration', 'amusement', 'anger', 'annoyance', 'approval', 'caring', 'confusion', 'curiosity', 'desire', 'disappointment', 'disapproval', 'disgust', 'embarrassment', 'excitement', 'fear', 'gratitude', 'grief', 'joy', 'love', 'nervousness', 'optimism', 'pride', 'realization', 'relief', 'remorse', 'sadness', 'surprise', 'neutral'])
2025-04-26 02:18:57.327 | INFO     | app.llm_service:configure_genai:25 - Google GenAI client configured.
2025-04-26 02:18:57.330 | INFO     | app.main:lifespan:23 - Redis cache cleared on startup.
2025-04-26 02:18:57.330 | INFO     | app.main:lifespan:26 - Startup complete.
2025-04-26 02:19:17.846 | INFO     | app.main:chat_endpoint:75 - [ReqID: req_899a64a6] Chat request: 'Last night, I stared at my reflection in the dark ...'
2025-04-26 02:19:17.860 | INFO     | app.utils:wrapper:76 - Starting 'Advanced Emotion Analysis'...
2025-04-26 02:19:20.169 | INFO     | app.emotion_pipeline:map_emotions:73 - Raw distribution: {'sadness': 0.5057997703552246, 'disappointment': 0.36466163396835327, 'nervousness': 0.16694454848766327, 'fear': 0.10032423585653305, 'neutral': 0.07236124575138092, 'realization': 0.06181052327156067, 'confusion': 0.04339586943387985, 'curiosity': 0.02909584902226925, 'annoyance': 0.0288398340344429, 'approval': 0.022496681660413742, 'grief': 0.01419729646295309, 'caring': 0.011969159357249737, 'disapproval': 0.011532170698046684, 'optimism': 0.01084426324814558, 'surprise': 0.010446387343108654, 'remorse': 0.009741079993546009, 'embarrassment': 0.007215684745460749, 'admiration': 0.006351341027766466, 'love': 0.00623728521168232, 'anger': 0.005592692643404007, 'desire': 0.005217917263507843, 'relief': 0.004440147429704666, 'joy': 0.0037270025350153446, 'excitement': 0.0031898575834929943, 'disgust': 0.002761678770184517, 'pride': 0.0010365532943978906, 'amusement': 0.0010149808367714286, 'gratitude': 0.00064500467851758}
2025-04-26 02:19:20.173 | INFO     | app.emotion_pipeline:map_emotions:74 - Mapped distribution: {'sad': 0.5058, 'disappointed': 0.36466, 'nervous': 0.16694, 'fearful': 0.10032, 'neutral': 0.07236, 'realizing': 0.06181, 'confused': 0.0434, 'curious': 0.0291, 'annoyed': 0.02884, 'approving': 0.0225, 'grieving': 0.0142, 'caring': 0.01197, 'disapproving': 0.01153, 'optimistic': 0.01084, 'surprised': 0.01045, 'remorseful': 0.00974, 'embarrassed': 0.00722, 'admiring': 0.00635, 'loved': 0.00624, 'angry': 0.00559, 'desirous': 0.00522, 'relieved': 0.00444, 'happy': 0.00373, 'excited': 0.00319, 'disgusted': 0.00276, 'proud': 0.00104, 'amused': 0.00101, 'grateful': 0.00065}
2025-04-26 02:19:20.175 | ERROR    | app.emotion_pipeline:analyze_emotions:128 - Failed to create EmotionAnalysisResult: Incorrect label names
2025-04-26 02:19:20.177 | INFO     | app.utils:wrapper:86 - 'Advanced Emotion Analysis' completed successfully in 2.3166 seconds.
2025-04-26 02:19:20.178 | WARNING  | app.main:chat_endpoint:98 - [ReqID: req_899a64a6] Emotion analysis used fallback neutral emotion.
2025-04-26 02:19:20.179 | INFO     | app.utils:wrapper:76 - Starting 'LLM Emotion + Response'...
2025-04-26 02:19:23.961 | INFO     | app.utils:wrapper:86 - 'LLM Emotion + Response' completed successfully in 3.7822 seconds.
2025-04-26 02:19:23.972 | INFO     | app.main:chat_endpoint:126 - [ReqID: req_899a64a6] Response cached.
2025-04-26 02:19:23.972 | INFO     | app.main:chat_endpoint:133 - [ReqID: req_899a64a6] Processed in 6.1309s.
2025-04-26 02:20:42.490 | INFO     | app.main:lifespan:28 - Shutting down...
2025-04-26 02:20:42.506 | ERROR    | app.cache:close_redis_pool:49 - Error closing Redis connection pool: 'Redis' object has no attribute 'wait_closed'
2025-04-26 02:20:42.508 | INFO     | app.main:lifespan:30 - Shutdown complete.
